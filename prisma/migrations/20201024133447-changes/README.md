# Migration `20201024133447-changes`

This migration has been generated by Thomas Waldbillig <waldbillig.thomas@gmail.com> at 10/24/2020, 3:34:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Category" ALTER COLUMN "updatedAt" SET DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201023191832-initial..20201024133447-changes
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,11 +14,11 @@
   userName     String
   email        String
   passwordHash String
   posts        Post[]
+  comments     Comment[]
   createdAt    DateTime  @default(now())
-  updatedAt    DateTime  @updatedAt
-  Comment      Comment[]
+  updatedAt    DateTime  @default(now()) @updatedAt
 }
 model Post {
   id          String     @id @default(cuid())
@@ -27,37 +27,37 @@
   slug        String
   publishedAt DateTime
   author      User       @relation(fields: [authorId], references: [id])
   authorId    String
+  categories  Category[]
   comments    Comment[]
-  categories  Category[]
   createdAt   DateTime   @default(now())
-  updatedAt   DateTime   @updatedAt
+  updatedAt   DateTime   @default(now()) @updatedAt
 }
 model Category {
   id        String   @id @default(cuid())
   title     String
   slug      String
   post      Post[]
   createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  updatedAt DateTime @default(now()) @updatedAt
 }
 model Comment {
   id        String   @id @default(cuid())
   content   String
-  user      User     @relation(fields: [userId], references: [id])
-  userId    String
+  author    User     @relation(fields: [authorId], references: [id])
+  authorId  String
   post      Post     @relation(fields: [postId], references: [id])
   postId    String
   createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  updatedAt DateTime @default(now()) @updatedAt
 }
 model Tag {
   id        String   @id @default(cuid())
   title     String
   slug      String
   createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  updatedAt DateTime @default(now()) @updatedAt
 }
```


